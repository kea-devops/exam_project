{% extends 'base.html' %}
{% block main %}
    <h1>{{ account.name }} - {{bank_reg}} {{account.account_num}}</h1>
    <a onclick="document.querySelector('dialog').showModal()" style="cursor: pointer;">Rename</a>
    <br>
    <br>
    
    <a href="javascript:window.history.back()">⬅️ Back</a>
    
    <p>Type: <b>{{account.account_type.name}}</b></p>
    <p>Interest Rate: <b>{{account.account_type.interest_rate}}%</b></p>
    <p>Balance ($): <b>{{account.balance}}</b></p>

    <h2>Movements</h2>
    <table>
        <tr>
            <th>Amount</th>
            <th>Type</th>
            <th>Sender/Recipient</th>
            <th>Date</th>
        </tr>
        {% for movement in movements %}
            <tr>
                <td>{{movement.amount}}</td>
                <td>{{movement.get_type_display}}</td>
                <td>{{movement.counterparty}}</td>
                <td>{{movement.created_at|date:'Y-m-d H:i'}}</td>
            </tr>
        {% endfor %}
    </table>
    
    <dialog>
        <header>Change Account Name</header>
        <form hx-target="body" hx-patch="{% url 'banking:customer/account' customer.pk account.pk%}">
            {% csrf_token %}
            {{ form.as_p }}
            <br>
            <menu>
                <button>Submit</button>
                <span style="cursor: pointer;" onclick="document.querySelector('dialog').close()">Cancel</span>
            </menu>
        </form>
    </dialog>



{% endblock %}

